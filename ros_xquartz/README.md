# ROS2 TurtleSim —Å XQuartz (X11 Forwarding)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ ROS2 TurtleSim –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ XQuartz –Ω–∞ macOS.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ROS2 Jazzy —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π GUI
- TurtleSim —Å X11 forwarding —á–µ—Ä–µ–∑ XQuartz
- –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã–º —Ä–∏—Å–æ–≤–∞–Ω–∏–µ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ X11 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### macOS —Å XQuartz

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ XQuartz:**
   ```bash
   brew install --cask xquartz
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ XQuartz** –∏ –≤–∫–ª—é—á–∏—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
   - –û—Ç–∫—Ä–æ–π—Ç–µ XQuartz
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ XQuartz ‚Üí Settings ‚Üí Security
   - –í–∫–ª—é—á–∏—Ç–µ "Allow connections from network clients"
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ XQuartz

3. **–†–∞–∑—Ä–µ—à–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
   ```bash
   xhost +localhost
   ```

## –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞

```bash
docker build -t ros2-xquartz-demo .
```

### 2. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker run -it \
  -e DISPLAY=host.docker.internal:0 \
  -v /tmp/.X11-unix:/tmp/.X11-unix \
  ros2-xquartz-demo
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

```bash
# –£–∑–Ω–∞–π—Ç–µ IP –∞–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞
export HOST_IP=$(ifconfig en0 | grep inet | grep -v inet6 | awk '{print $2}')

# –†–∞–∑—Ä–µ—à–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å —ç—Ç–æ–≥–æ IP
xhost +$HOST_IP

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker run -it \
  -e DISPLAY=$HOST_IP:0 \
  ros2-xquartz-demo
```

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ X11**: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å XQuartz
2. **–ó–∞–ø—É—Å–∫ TurtleSim**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–∫–Ω–æ TurtleSim
3. **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è**: –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∏—Å–æ–≤–∞–Ω–∏—è:
   - üî¥ **–ö—Ä–∞—Å–Ω—ã–π –∫—Ä—É–≥** (20 —Å–µ–∫—É–Ω–¥)
   - üü¢ **–ó–µ–ª–µ–Ω—ã–π –∫–≤–∞–¥—Ä–∞—Ç** (16 —Å–µ–∫—É–Ω–¥)
   - üîµ **–°–∏–Ω–∏–µ –≤–æ–ª–Ω—ã** (15 —Å–µ–∫—É–Ω–¥)
   - üü° **–ñ–µ–ª—Ç–∞—è —Å–ø–∏—Ä–∞–ª—å** (10 —Å–µ–∫—É–Ω–¥)
   - üîÑ **–ü–æ–≤—Ç–æ—Ä —Ü–∏–∫–ª–∞**

## –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

–§–∞–π–ª `src/demo/main.py` –≤–∫–ª—é—á–∞–µ—Ç:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏–µ–º —á–µ—Ä–µ–ø–∞—Ö–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ –∏ —Ç–æ–ª—â–∏–Ω—ã –ø–µ—Ä–∞
- –†–∞–∑–ª–∏—á–Ω—ã–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- ROS2 —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è TurtleSim
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û–∫–Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ XQuartz
ps aux | grep XQuartz

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
xhost

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ XQuartz
sudo pkill XQuartz
open -a XQuartz
```

### –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DISPLAY
echo $DISPLAY

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ XQuartz
# Settings ‚Üí Security ‚Üí "Allow connections from network clients"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Docker
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∂–∏–º Docker Desktop
# Docker Desktop ‚Üí Settings ‚Üí Use Docker Compose V2
```

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É:

```bash
docker run -it \
  -e DISPLAY=host.docker.internal:0 \
  -v /tmp/.X11-unix:/tmp/.X11-unix \
  ros2-xquartz-demo bash
```

–ó–∞—Ç–µ–º:
```bash
source /opt/ros/jazzy/setup.bash
ros2 run turtlesim turtlesim_node &
ros2 run turtlesim turtle_teleop_key
```